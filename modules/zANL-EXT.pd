#N canvas 1775 224 913 526 10;
#X declare -path ext-ernals;
#X declare -path RSVP;
#X declare -path ../sys.comunication;
#X obj 400 180 cnv 15 235 200 empty zanal-canvas empty 20 12 0 14 #202020 #202020 0;
#X obj 405 185 cnv 15 225 190 empty harmonicity-\$1 ANALYSIS 145 175 0 16 #e0e0e0 #000000 0;
#X obj 412 326 tgl 15 0 empty MASTER-SILENCE-\$1 Silence 17 7 0 10 #7c7c7c #202020 #202020 0 1;
#X obj 24 10 declare -path ext-ernals;
#X obj 36 370 cnv 5 250 5 empty empty empty 5 6 0 10 #000000 #dcdcdc 0;
#X obj 24 31 declare -path RSVP;
#X obj 481 199 cnv 8 32 9 empty empty ON/OFF 2 5 0 8 #000000 #fcfcfc 0;
#X obj 506 334 cnv 12 32 16 empty empty T4Sil 2 8 0 8 #000000 #fcfcfc 0;
#X obj 414 219 cnv 10 100 12 empty display-type-\$0 HARMON--1 5 6 0 10 #0400fc #fcfcfc 0;
#X obj 797 209 DSP-ON;
#X obj 830 232 switch~;
#N canvas 311 262 200 413 detect_silence 0;
#X obj 20 20 inlet~;
#X obj 30 176 metro;
#X obj 31 135 change;
#X text 65 105 detect silence;
#X obj 31 60 env~;
#X obj 31 104 < 45;
#X obj 30 296 change;
#X obj 30 227 f;
#X obj 54 227 + 1;
#X obj 136 320 cnv 20 20 20 empty empty empty 20 12 0 14 #f8fc00 #404040 0;
#X obj 30 155 t a b;
#X obj 69 179 0;
#X obj 69 200 t a a;
#X obj 100 251 cnv 10 10 10 empty empty empty 20 12 0 14 #fc0400 #404040 0;
#X obj 129 52 inlet;
#X obj 63 248 inlet;
#X obj 30 269 > 3000;
#X obj 30 323 s MASTER-SILENCE-\$1;
#X obj 99 143 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X floatatom 94 270 5 0 0 0 - - - 0;
#X obj 95 297 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X floatatom 65 81 5 0 0 0 - - - 0;
#X connect 0 0 4 0;
#X connect 1 0 7 0;
#X connect 2 0 10 0;
#X connect 4 0 5 0;
#X connect 4 0 21 0;
#X connect 5 0 2 0;
#X connect 5 0 18 0;
#X connect 6 0 17 0;
#X connect 7 0 8 0;
#X connect 7 0 16 0;
#X connect 8 0 7 1;
#X connect 10 0 1 0;
#X connect 10 1 11 0;
#X connect 11 0 12 0;
#X connect 12 0 7 0;
#X connect 12 1 7 1;
#X connect 14 0 5 1;
#X connect 15 0 16 1;
#X connect 15 0 19 0;
#X connect 16 0 6 0;
#X connect 16 0 20 0;
#X restore 109 222 pd detect_silence;
#X obj 671 232 metro 100;
#X obj 671 252 s \$0-poll;
#X obj 414 245 cnv 10 100 12 empty p-fund-\$1 P/FUND-71/MIDI 5 6 0 10 #0400fc #fcfcfc 0;
#X obj 570 195 vsl 21 130 0 100 0 0 empty \$1-\$2-sig-IN RMS 3 12 0 9 #541010 #00f8fc #00fc04 0 1;
#X obj 600 195 vsl 22 130 0 100 0 0 empty \$1-\$2-sig-IN-PEAK PEAK 1 12 0 8 #541010 #00f8fc #00fc04 0 1;
#N canvas 1244 278 622 354 pitch-tracking-and-amp 0;
#X obj 91 40 inlet~;
#X obj 354 56 peakamp~ 25;
#X obj 354 88 * 100;
#X obj 440 203 pipe 10;
#X obj 425 234 -;
#X obj 425 276 sel 1;
#X obj 215 199 sel 0 1;
#X obj 215 162 speedlim 500;
#X msg 215 248 \; zanal-canvas color 12 12 12;
#X msg 234 218 \; zanal-canvas color 16 12 12;
#X obj 264 199 loadbang;
#X obj 215 180 > 0;
#X msg 75 177 label P/FUND-\$1/MIDI;
#X obj 24 120 sel -1500;
#X obj 75 149 i;
#X msg 24 157 0;
#X obj 256 125 send \$1-\$2-sig-IN;
#X obj 355 154 send \$1-\$2-sig-IN-PEAK;
#X obj 91 121 send fund-frequency-\$1-\$2;
#X floatatom 513 213 5 0 0 0 - - - 0;
#X obj 91 86 sigmund~ -hop 4096 notes env;
#X obj 425 298 s MASTER_ATTACK-\$1;
#X obj 77 208 send p-fund-\$1;
#X obj 34 235 send p-fund-\$1-\$2;
#X floatatom 401 122 5 0 0 0 - - - 0;
#X obj 426 256 > 55;
#X connect 0 0 1 0;
#X connect 0 0 20 0;
#X connect 1 0 2 0;
#X connect 2 0 4 0;
#X connect 2 0 3 0;
#X connect 2 0 17 0;
#X connect 2 0 24 0;
#X connect 3 0 4 1;
#X connect 4 0 25 0;
#X connect 5 0 21 0;
#X connect 6 0 8 0;
#X connect 6 1 9 0;
#X connect 7 0 11 0;
#X connect 10 0 8 0;
#X connect 11 0 6 0;
#X connect 12 0 22 0;
#X connect 13 0 15 0;
#X connect 13 1 14 0;
#X connect 14 0 12 0;
#X connect 14 0 23 0;
#X connect 15 0 12 0;
#X connect 19 0 25 1;
#X connect 20 0 13 0;
#X connect 20 0 18 0;
#X connect 20 1 7 0;
#X connect 20 1 16 0;
#X connect 25 0 5 0;
#X restore 183 128 pd pitch-tracking-and-amp;
#X obj 183 147 cnv 5 95 5 empty empty empty 5 6 0 10 #00fc04 #dcdcdc 0;
#X obj 414 193 cnv 15 60 20 empty empty empty 20 12 0 14 #0400fc #404040 0;
#X obj 416 195 bng 15 250 50 0 empty MASTER_ATTACK-\$1 ATTACK 17 7 0 10 #0400fc #fc0400 #fcfcfc;
#X obj 414 273 cnv 10 100 12 empty timbre-\$1 TIMBRE-ID-473 5 6 0 10 #0400fc #fcfcfc 0;
#X obj 414 300 cnv 10 100 12 empty timbre-level-\$1 T/LEVEL-3.07677 5 6 0 10 #0400fc #fcfcfc 0;
#N canvas 156 181 386 438 detect-onsets/timbre 0;
#X obj 100 6 inlet~;
#N canvas 220 548 745 433 onsets 0;
#X obj 56 53 inlet~;
#X obj 146 327 outlet;
#X obj 3 4 cnv 10 400 10 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 3 4 cnv 10 10 400 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 178 173 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 171 96 r bark-settings;
#X text 308 53 timbreID comes with its own onset detection object: bark~. See its helpfile for more details. In comparison with bonk~ (the usual onset detection object in Pd) \, bark~ performs very similarly but has several extra conveniences. Most importantly \, there is a non-real-time version of the object \, enabling easy parsing of pre-recorded audio.;
#X obj 336 292 loadbang;
#X obj 56 385 outlet~;
#X text 308 163 Doing the attack detection in a subpatch with the input signal connected in series before [bfcc~] guarantees the DSP order. We first analyze the signal with [bark~] here to look for attacks \, and if we find one \, spit out a bang to get the most recent BFCC analysis possible back in the parent patch.;
#X text 558 321 These were good onset detection settings for the audio files used in this help file., f 22;
#X msg 336 314 \; bark-settings minvel 15 \; bark-settings debounce 350 \; bark-settings thresh 5 12 \; bark-settings filter_range 20 49 \;;
#X obj 146 135 bark~ 1024 256 0.5;
#X connect 0 0 8 0;
#X connect 0 0 12 0;
#X connect 5 0 12 0;
#X connect 7 0 11 0;
#X connect 12 0 4 0;
#X connect 12 0 1 0;
#X restore 100 60 pd onsets;
#X obj 100 101 bfcc~ 1024 0.5;
#X obj 100 122 list split 25;
#X obj 30 151 timbreID, f 17;
#X obj 197 109 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X msg 120 235 label TIMBRE-ID-\$1;
#X msg 133 186 label T/LEVEL-\$1;
#X msg 30 39 read himno-syllables.timid;
#X obj 30 14 loadbang;
#X obj 30 361 s to_pd~_subprocess;
#X obj 30 281 pack f f;
#X obj 30 335 message-to-pd~ TIMBRE-ID \$1-\$2;
#X obj 120 255 s timbre-\$1-\$2;
#X obj 133 206 s timbre-level-\$1-\$2;
#X obj 81 311 s TIMBRE-ID-\$1-\$2;
#X obj 235 102 s MASTER_ATTACK-\$1;
#X connect 0 0 1 0;
#X connect 1 0 2 0;
#X connect 1 1 5 0;
#X connect 1 1 2 0;
#X connect 2 0 3 0;
#X connect 4 0 6 0;
#X connect 4 0 11 0;
#X connect 4 0 15 0;
#X connect 4 1 7 0;
#X connect 4 1 11 1;
#X connect 6 0 13 0;
#X connect 7 0 14 0;
#X connect 9 0 8 0;
#X connect 11 0 12 0;
#X connect 12 0 10 0;
#X restore 59 265 pd detect-onsets/timbre;
#N canvas 86 326 267 349 harmonicity 0;
#X obj 30 16 inlet~;
#X obj 30 177 sel 1 0;
#X obj 30 259 send display-type-\$0;
#X obj 30 86 barkSpecBrightness~ 1024 0.5 8.5;
#X obj 30 145 > 0.4;
#X obj 46 60 r \$0-poll;
#X msg 30 229 label INHARM-\$1;
#X obj 30 204 f;
#X msg 139 235 label HARMON-\$1;
#X obj 139 206 f;
#X obj 30 124 t a a;
#X obj 71 117 send HARMONICITY-\$1;
#X obj 93 20 noise~;
#X connect 0 0 3 0;
#X connect 1 0 7 0;
#X connect 1 1 9 0;
#X connect 3 0 10 0;
#X connect 3 0 11 0;
#X connect 4 0 1 0;
#X connect 5 0 3 0;
#X connect 6 0 2 0;
#X connect 7 0 6 0;
#X connect 8 0 2 0;
#X connect 9 0 8 0;
#X connect 10 0 4 0;
#X connect 10 1 9 1;
#X connect 10 1 7 1;
#X restore 37 312 pd harmonicity;
#X obj 109 241 cnv 5 95 5 empty empty empty 5 6 0 10 #fc8000 #dcdcdc 0;
#X obj 544 434 / 1.27;
#X obj 631 476 cnv 10 10 10 empty empty empty 20 12 0 14 #fc0400 #404040 0;
#X obj 297 199 cnv 10 10 10 empty empty empty 20 12 0 14 #fc0400 #404040 0;
#X obj 241 176 cnv 10 10 10 empty empty empty 20 12 0 14 #fc0400 #404040 0;
#X obj 566 401 cnv 10 10 10 empty empty empty 20 12 0 14 #fc0400 #404040 0;
#X obj 59 284 cnv 5 95 5 empty empty empty 5 6 0 10 #f8fc00 #dcdcdc 0;
#X obj 37 331 cnv 5 95 5 empty empty empty 5 6 0 10 #9c9c9c #dcdcdc 0;
#X obj 523 217 cnv 5 5 70 empty empty empty 5 6 0 10 #000000 #dcdcdc 0;
#X obj 482 393 s \$1-\$2-T4Sil;
#X obj 544 473 s \$1-\$2-sil.th;
#X obj 208 194 r \$1-\$2-sil.th;
#X obj 158 172 r \$1-\$2-T4Sil;
#X obj 472 89 declare -path ../sys.comunication;
#X obj 38 75 r~ to_analysis-\$1;
#N canvas 400 151 725 475 button 0;
#X obj 137 100 tgl 20 0 empty empty empty 17 7 0 10 #fc2828 #fc2828 #202020 0 1;
#X obj 226 85 sel 0 1;
#X msg 226 111 color 13 13 42;
#X msg 246 135 color 16 16 42;
#X msg 137 172 vis \$1;
#X msg 152 129 1;
#X msg 137 353 \; pd-chroma_analysis-\$2 vis \$1;
#X obj 137 313 pack f symbol;
#X obj 137 272 t a b;
#X obj 212 290 symbol \$1-\$2;
#N canvas 694 432 623 225 chroma_analysis-\$1-\$2 0;
#X obj 10 10 cnv 15 600 200 empty empty empty 20 12 0 14 #202020 #202020 0;
#X obj 15 15 cnv 15 590 190 empty empty CHROMA 5 180 0 12 #8099ff #000000 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array chromagram-\$1-\$2 12 float 3;
#A 0 0.371598 0.874527 0.874548 0.876115 1 0.851833 0.90802 0.694886 0.775544 0.817213 0.96385 0.85219;
#X coords 0 1 12 0 196 140 1 0 0;
#X restore 368 32 graph;
#X obj 367 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 383 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 400 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 416 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 432 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 448 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 465 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 481 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 498 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 514 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 531 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 547 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X text 366 168 C__C#_D__D#_E_F__F#_G_G#_A__A#_B;
#N canvas 0 22 450 300 (subpatch) 0;
#X array chroma-\$1-\$2 12 float 3;
#A 0 0.314343 0.821344 0.766086 0.764425 0.770443 0.581358 0.680983 0.433677 0.637238 0.56449 1 0.616682;
#X coords 0 1 12 0 196 140 1 0 0;
#X restore 157 32 graph;
#X obj 157 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 173 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 190 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 206 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 222 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 238 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 255 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 271 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 288 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 304 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X obj 321 33 cnv 15 16 140 empty empty empty 20 12 0 14 #e0e0e0 #404040 0;
#X obj 337 33 cnv 15 16 140 empty empty empty 20 12 0 14 #9c9c9c #404040 0;
#X text 156 168 C__C#_D__D#_E_F__F#_G_G#_A__A#_B;
#X obj 34 20 cnv 10 90 18 empty display-chroma-pcs-\$0 PCS-nill 2 9 0 16 #0400fc #fcfcfc 0;
#X obj 140 188 cnv 8 32 9 empty empty ON/OFF 2 5 0 8 #000000 #fcfcfc 0;
#X obj 119 183 ./customGUI/tgl-but_pre \$1 \$2 DSP;
#X obj 37 49 nbx_pre \$1 \$2 minfreq;
#X obj 94 55 cnv 10 25 10 empty empty min 3 5 0 8 #000000 #00f8fc 0;
#X obj 94 71 cnv 10 25 10 empty empty max 3 5 0 8 #000000 #00f8fc 0;
#X obj 37 68 nbx_pre \$1 \$2 maxfreq;
#X obj 545 186 tgl 15 0 chromagram-vis-\$1-\$2 empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 337 186 tgl 15 0 chroma-vis-\$1-\$2 empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X obj 375 186 bng 15 250 50 0 \$1-\$2-resetcount empty ResetCountChromagram 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 94 90 cnv 10 29 10 empty empty notes 3 5 0 8 #000000 #00f8fc 0;
#X obj 37 87 nbx_pre \$1 \$2 notenum;
#X listbox 20 159 14 0 0 1 Pitches display-chroma-pcs-pitches-\$0 - 0;
#X obj 35 112 bng 25 250 50 0 \$1-\$2-play-chroma empty play/CHROMA -15 34 0 10 #0400ff #00ff04 #000000;
#X obj 109 112 bng 25 250 50 0 \$1-\$2-play-chromagram empty play/GRAM -12 34 0 10 #0400ff #00ff04 #000000;
#X coords 0 225 1 224 600 200 0;
#X restore 372 208 pd chroma_analysis-\$1-\$2;
#X obj 101 102 cnv 15 35 15 empty empty CHROMA 2 8 0 8 #000000 #00faff 0;
#X obj 137 36 loadbang;
#X obj 137 59 0;
#X connect 0 0 1 0;
#X connect 0 0 4 0;
#X connect 0 0 8 0;
#X connect 1 0 2 0;
#X connect 1 1 3 0;
#X connect 2 0 0 0;
#X connect 3 0 0 0;
#X connect 5 0 4 0;
#X connect 7 0 6 0;
#X connect 8 0 7 0;
#X connect 8 1 9 0;
#X connect 9 0 7 1;
#X connect 12 0 13 0;
#X connect 13 0 0 0;
#X coords 0 -1 1 1 58 20 2 100 100;
#X restore 412 344 pd button;
#N canvas 1817 136 701 489 chroma 0;
#X obj 222 109 tgl 15 0 empty empty on/off 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X msg 271 139 normalize \$1;
#X obj 271 118 tgl 15 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000 0 1;
#X floatatom 77 136 5 0 0 0 - - - 0;
#X floatatom 116 136 5 0 0 0 - - - 0;
#N canvas 752 387 719 350 bins 0;
#X obj 100 39 t b f;
#X obj 48 27 inlet;
#X obj 101 11 inlet;
#X obj 49 130 outlet;
#X obj 173 129 outlet;
#X obj 249 87 inlet;
#X obj 277 7 loadbang;
#X msg 285 56 8192;
#X obj 48 86 expr int($f1/($f3/$f4)) \; int($f2/($f3/$f4));
#X obj 151 49 samplerate~;
#X obj 158 9 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X connect 0 0 8 0;
#X connect 0 1 8 1;
#X connect 1 0 8 0;
#X connect 2 0 0 0;
#X connect 5 0 8 3;
#X connect 6 0 7 0;
#X connect 6 0 9 0;
#X connect 7 0 8 3;
#X connect 8 0 3 0;
#X connect 8 1 4 0;
#X connect 9 0 8 2;
#X connect 10 0 9 0;
#X restore 77 107 pd bins;
#X msg 150 114 2048;
#X msg 337 106 set 2048 2;
#X text 330 13 by Adriano Monteiro - monteiro.adc@gmail.com;
#X text 6 5 Chroma vectors in a period of time;
#X obj 269 182 list prepend 0;
#N canvas 904 208 235 255 chromagram 0;
#X obj 116 23 r next;
#X obj 34 8 inlet;
#N canvas 30 430 450 300 list 0;
#N canvas 0 22 199 262 drip 0;
#X obj 53 174 list split 1;
#X obj 53 91 until;
#X obj 53 129 list append;
#X obj 79 58 t b l;
#X obj 135 176 bang;
#X obj 79 31 inlet;
#X obj 53 199 outlet;
#X connect 0 0 6 0;
#X connect 0 1 2 1;
#X connect 0 2 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 1 1;
#X connect 5 0 3 0;
#X restore 152 84 pd drip;
#X obj 153 219 list prepend;
#X obj 251 219 t a;
#N canvas 0 22 450 300 dripslow 0;
#X obj 158 196 list split 1;
#X obj 158 171 list append;
#X obj 158 247 outlet;
#X obj 158 47 inlet;
#X obj 239 247 outlet;
#X obj 232 45 inlet;
#X obj 158 82 b;
#X text 275 46 list;
#X text 113 47 bang;
#X text 283 247 EOL;
#X text 99 246 element;
#X obj 239 217 b;
#X connect 0 0 2 0;
#X connect 0 1 1 1;
#X connect 0 2 11 0;
#X connect 1 0 0 0;
#X connect 3 0 6 0;
#X connect 5 0 1 1;
#X connect 6 0 1 0;
#X connect 11 0 4 0;
#X restore 205 141 pd dripslow;
#X obj 268 106 inlet;
#X obj 152 110 t f b;
#X obj 132 254 list;
#X obj 152 182 + 0;
#X obj 133 24 inlet;
#X obj 132 274 outlet;
#X obj 132 50 t b a b;
#X msg 167 157 0;
#X obj 190 278 print;
#X connect 0 0 5 0;
#X connect 1 0 2 0;
#X connect 1 0 6 1;
#X connect 2 0 1 1;
#X connect 3 0 7 1;
#X connect 4 0 3 1;
#X connect 5 0 7 0;
#X connect 5 1 3 0;
#X connect 6 0 9 0;
#X connect 7 0 1 0;
#X connect 8 0 10 0;
#X connect 10 0 6 0;
#X connect 10 1 0 0;
#X connect 10 2 1 1;
#X connect 10 2 11 0;
#X connect 11 0 7 1;
#X restore 34 55 pd list add;
#X obj 116 53 list;
#N canvas 0 22 579 459 list 0;
#X obj 138 130 route float;
#X obj 116 232 f;
#X obj 116 259 outlet;
#X obj 116 20 inlet;
#N canvas 0 22 450 300 once 0;
#X obj 110 75 inlet;
#X obj 105 187 spigot 1;
#X obj 110 104 t b f;
#X msg 125 151 0;
#X msg 165 99 1;
#X obj 165 63 inlet;
#X obj 102 219 outlet;
#X connect 0 0 2 0;
#X connect 1 0 6 0;
#X connect 2 0 3 0;
#X connect 2 1 1 0;
#X connect 3 0 1 1;
#X connect 4 0 1 1;
#X connect 5 0 4 0;
#X restore 204 158 pd once;
#X obj 177 199 f;
#X obj 146 198 max;
#X obj 116 40 t b a b;
#X text 331 193 prime [min] and [max] with first item once;
#X obj 138 160 t a a;
#N canvas 0 22 199 243 drip 0;
#X obj 53 174 list split 1;
#X obj 53 91 until;
#X obj 53 129 list append;
#X obj 79 58 t b l;
#X obj 135 176 bang;
#X obj 79 31 inlet;
#X obj 53 199 outlet;
#X connect 0 0 6 0;
#X connect 0 1 2 1;
#X connect 0 2 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 1 1;
#X connect 5 0 3 0;
#X restore 137 98 pd drip;
#X connect 0 0 9 0;
#X connect 1 0 2 0;
#X connect 3 0 7 0;
#X connect 4 0 6 1;
#X connect 5 0 6 1;
#X connect 6 0 5 0;
#X connect 6 0 1 1;
#X connect 7 0 1 0;
#X connect 7 1 10 0;
#X connect 7 2 4 1;
#X connect 9 0 6 0;
#X connect 9 1 4 0;
#X connect 10 0 0 0;
#X restore 122 139 pd list max;
#X obj 34 122 t l l;
#X obj 107 175 /;
#N canvas 381 107 467 423 list 0;
#X obj 96 43 inlet;
#X obj 285 62 inlet;
#X obj 161 362 outlet;
#X obj 180 258 outlet;
#X obj 161 327 list;
#X obj 285 225 list prepend;
#X obj 364 195 t a;
#X obj 161 165 t b a a b;
#X obj 96 68 route bang;
#X obj 96 93 b;
#X obj 161 94 t b a;
#X obj 161 134 list;
#N canvas 0 22 199 262 drip 0;
#X obj 53 174 list split 1;
#X obj 53 91 until;
#X obj 53 129 list append;
#X obj 79 58 t b l;
#X obj 135 176 bang;
#X obj 79 31 inlet;
#X obj 53 199 outlet;
#X connect 0 0 6 0;
#X connect 0 1 2 1;
#X connect 0 2 4 0;
#X connect 1 0 2 0;
#X connect 2 0 0 0;
#X connect 3 0 1 0;
#X connect 3 1 2 1;
#X connect 4 0 1 1;
#X connect 5 0 3 0;
#X restore 179 218 pd drip;
#X connect 0 0 8 0;
#X connect 1 0 5 0;
#X connect 4 0 2 0;
#X connect 5 0 6 0;
#X connect 5 0 4 1;
#X connect 6 0 5 1;
#X connect 7 0 4 0;
#X connect 7 1 12 0;
#X connect 7 2 4 1;
#X connect 7 3 5 1;
#X connect 8 0 9 0;
#X connect 8 1 10 0;
#X connect 9 0 11 0;
#X connect 10 0 11 0;
#X connect 10 1 11 1;
#X connect 11 0 7 0;
#X connect 12 0 3 0;
#X restore 34 175 pd list map;
#X obj 34 200 list prepend 0;
#X obj 34 227 s chromagram-\$1-\$2;
#X obj 34 98 spigot;
#X obj 67 76 r chromagram-vis-\$1-\$2;
#X obj 169 17 inlet;
#X connect 0 0 3 0;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 2 0 10 0;
#X connect 3 0 2 1;
#X connect 4 0 6 1;
#X connect 5 0 7 0;
#X connect 5 1 4 0;
#X connect 6 0 7 1;
#X connect 7 0 8 0;
#X connect 7 1 6 0;
#X connect 8 0 9 0;
#X connect 10 0 5 0;
#X connect 11 0 10 1;
#X connect 12 0 3 0;
#X restore 46 266 pd chromagram;
#X obj 46 164 chroma12~ 8192 2;
#X obj 45 24 inlet~;
#X obj 269 249 s chroma-\$1-\$2;
#X obj 269 226 spigot;
#X obj 302 204 r chroma-vis-\$1-\$2;
#X msg 121 244 0 0 0 0 0 0 0 0 0 0 0;
#X obj 519 173 text define chromagram;
#X msg 519 149 clear;
#X obj 77 45 r \$1/\$2/minfreq-nbx-o;
#X obj 96 65 r \$1/\$2/maxfreq-nbx-o;
#X obj 222 88 r \$1/\$2/DSP-tgl-o;
#X obj 343 60 r \$1/\$2/FFTsize-nbx-o;
#X obj 121 207 r \$1-\$2-resetcount;
#X obj 102 229 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#N canvas 1911 32 801 673 play-chromagram 0;
#X msg 256 589 label PCS-\$1;
#X obj 256 611 send display-chroma-pcs-\$0;
#X obj 256 569 symbol;
#X obj 562 102 until;
#X obj 562 127 f;
#X obj 589 127 + 1;
#X msg 605 100 0;
#X msg 562 56 12;
#X obj 562 79 t a b;
#X obj 562 267 text set chromagram;
#X obj 239 187 text get chromagram;
#X obj 562 149 t a a a;
#X obj 562 196 swap;
#X obj 562 241 pack f f;
#X obj 239 108 until;
#X obj 239 133 f;
#X obj 266 133 + 1;
#X msg 282 106 0;
#X msg 239 62 12;
#X obj 239 155 t a a a;
#X obj 239 212 unpack;
#X obj 239 85 t a b b;
#X msg 239 239 add2 \$1;
#X obj 239 289 sort -1;
#X obj 239 357 text search chromagram;
#X obj 239 334 list-drip;
#X obj 239 380 text get chromagram;
#X obj 239 265 textfile;
#X obj 98 162 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X msg 140 213 rewind;
#X msg 98 212 bang;
#X obj 98 182 t b b;
#X msg 395 191 clear;
#X obj 462 398 unpack f f;
#X obj 462 421 swap;
#X text 319 311 <- cantidad de notas en el acorde;
#X obj 462 443 t a b;
#X obj 490 504 * 12;
#X obj 462 505 +;
#X floatatom 462 528 5 0 0 0 - - - 0;
#X obj 590 474 * 127;
#X obj 220 38 t b b b;
#X text 289 289 <- ordena de mayor a menor;
#X text 543 479 octava;
#X obj 239 428 textfile;
#X msg 239 407 add2 \$1;
#X msg 140 382 rewind;
#X msg 98 381 bang;
#X obj 98 351 t b b;
#X obj 98 326 del 15;
#X obj 239 451 pcs_pf;
#X obj 239 471 pcs_read, f 18;
#X obj 256 526 pack f f;
#X msg 256 547 \$1-\$2;
#X floatatom 413 260 5 0 0 0 - - - 0;
#X obj 413 236 r \$1/\$2/notenum-nbx-o;
#X obj 239 500 send display-chroma-pcs-pitches-\$0;
#X obj 490 483 + 4;
#X obj 239 312 list split 2;
#X obj 562 172 tabread chromagram-\$1-\$2;
#X obj 490 463 random 3;
#X obj 220 15 inlet;
#X obj 462 610 send \$1-\$2-chromagram-pitches;
#X obj 462 579 pack f f;
#X obj 110 549 loadbang;
#X msg 110 579 label PCS-nill;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 11 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 8 0;
#X connect 8 0 3 0;
#X connect 8 1 6 0;
#X connect 10 0 20 0;
#X connect 11 0 59 0;
#X connect 11 1 12 1;
#X connect 11 1 13 1;
#X connect 11 2 9 1;
#X connect 13 0 9 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 0 19 0;
#X connect 16 0 15 1;
#X connect 17 0 15 1;
#X connect 18 0 21 0;
#X connect 19 0 10 0;
#X connect 20 0 22 0;
#X connect 21 0 14 0;
#X connect 21 1 17 0;
#X connect 21 2 32 0;
#X connect 22 0 27 0;
#X connect 23 0 58 0;
#X connect 24 0 26 0;
#X connect 25 0 24 0;
#X connect 26 0 33 0;
#X connect 27 0 23 0;
#X connect 28 0 31 0;
#X connect 29 0 27 0;
#X connect 30 0 27 0;
#X connect 30 0 49 0;
#X connect 31 0 30 0;
#X connect 31 1 29 0;
#X connect 32 0 27 0;
#X connect 32 0 44 0;
#X connect 33 0 34 0;
#X connect 33 1 34 1;
#X connect 34 0 36 0;
#X connect 34 0 45 0;
#X connect 34 1 40 0;
#X connect 36 0 38 0;
#X connect 36 1 60 0;
#X connect 37 0 38 1;
#X connect 38 0 39 0;
#X connect 39 0 63 0;
#X connect 40 0 63 1;
#X connect 41 0 28 0;
#X connect 41 1 18 0;
#X connect 41 2 7 0;
#X connect 44 0 50 0;
#X connect 45 0 44 0;
#X connect 46 0 44 0;
#X connect 47 0 44 0;
#X connect 48 0 47 0;
#X connect 48 1 46 0;
#X connect 49 0 48 0;
#X connect 50 0 51 0;
#X connect 51 0 56 0;
#X connect 51 1 52 0;
#X connect 51 2 52 1;
#X connect 52 0 53 0;
#X connect 53 0 2 0;
#X connect 55 0 54 0;
#X connect 55 0 58 1;
#X connect 57 0 37 0;
#X connect 58 0 25 0;
#X connect 59 0 12 0;
#X connect 59 0 13 0;
#X connect 60 0 57 0;
#X connect 61 0 41 0;
#X connect 63 0 62 0;
#X connect 64 0 65 0;
#X connect 65 0 1 0;
#X restore 211 400 pd play-chromagram;
#N canvas 1988 27 801 673 play-chroma 0;
#X msg 256 589 label PCS-\$1;
#X obj 256 611 send display-chroma-pcs-\$0;
#X obj 256 569 symbol;
#X obj 562 102 until;
#X obj 562 127 f;
#X obj 589 127 + 1;
#X msg 605 100 0;
#X msg 562 56 12;
#X obj 562 79 t a b;
#X obj 562 149 t a a a;
#X obj 562 196 swap;
#X obj 562 241 pack f f;
#X obj 239 108 until;
#X obj 239 133 f;
#X obj 266 133 + 1;
#X msg 282 106 0;
#X msg 239 62 12;
#X obj 239 155 t a a a;
#X obj 239 212 unpack;
#X obj 239 85 t a b b;
#X msg 239 239 add2 \$1;
#X obj 239 289 sort -1;
#X obj 239 334 list-drip;
#X obj 239 265 textfile;
#X obj 98 162 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X msg 140 213 rewind;
#X msg 98 212 bang;
#X obj 98 182 t b b;
#X msg 395 191 clear;
#X obj 462 398 unpack f f;
#X obj 462 421 swap;
#X text 319 311 <- cantidad de notas en el acorde;
#X obj 462 443 t a b;
#X obj 490 504 * 12;
#X obj 462 505 +;
#X floatatom 462 528 5 0 0 0 - - - 0;
#X obj 590 474 * 127;
#X obj 220 38 t b b b;
#X text 289 289 <- ordena de mayor a menor;
#X text 543 479 octava;
#X obj 239 428 textfile;
#X msg 239 407 add2 \$1;
#X msg 140 382 rewind;
#X msg 98 381 bang;
#X obj 98 351 t b b;
#X obj 98 326 del 15;
#X obj 239 451 pcs_pf;
#X obj 239 471 pcs_read, f 18;
#X obj 256 526 pack f f;
#X msg 256 547 \$1-\$2;
#X floatatom 413 260 5 0 0 0 - - - 0;
#X obj 413 236 r \$1/\$2/notenum-nbx-o;
#X obj 239 500 send display-chroma-pcs-pitches-\$0;
#X obj 490 483 + 4;
#X obj 239 312 list split 2;
#X obj 220 15 inlet;
#X obj 239 187 text get chroma;
#X obj 562 172 tabread chroma-\$1-\$2;
#X obj 562 267 text set chroma;
#X obj 239 357 text search chroma;
#X obj 239 380 text get chroma;
#X obj 490 463 random 6;
#X obj 462 573 pack f f;
#X obj 463 595 send \$1-\$2-play-chroma-pitches;
#X obj 110 549 loadbang;
#X msg 110 579 label PCS-nill;
#X connect 0 0 1 0;
#X connect 2 0 0 0;
#X connect 3 0 4 0;
#X connect 4 0 5 0;
#X connect 4 0 9 0;
#X connect 5 0 4 1;
#X connect 6 0 4 1;
#X connect 7 0 8 0;
#X connect 8 0 3 0;
#X connect 8 1 6 0;
#X connect 9 0 57 0;
#X connect 9 1 10 1;
#X connect 9 1 11 1;
#X connect 9 2 58 1;
#X connect 11 0 58 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 13 0 17 0;
#X connect 14 0 13 1;
#X connect 15 0 13 1;
#X connect 16 0 19 0;
#X connect 17 0 56 0;
#X connect 18 0 20 0;
#X connect 19 0 12 0;
#X connect 19 1 15 0;
#X connect 19 2 28 0;
#X connect 20 0 23 0;
#X connect 21 0 54 0;
#X connect 22 0 59 0;
#X connect 23 0 21 0;
#X connect 24 0 27 0;
#X connect 25 0 23 0;
#X connect 26 0 23 0;
#X connect 26 0 45 0;
#X connect 27 0 26 0;
#X connect 27 1 25 0;
#X connect 28 0 23 0;
#X connect 28 0 40 0;
#X connect 29 0 30 0;
#X connect 29 1 30 1;
#X connect 30 0 32 0;
#X connect 30 0 41 0;
#X connect 30 1 36 0;
#X connect 32 0 34 0;
#X connect 32 1 61 0;
#X connect 33 0 34 1;
#X connect 34 0 35 0;
#X connect 34 0 62 0;
#X connect 36 0 62 1;
#X connect 37 0 24 0;
#X connect 37 1 16 0;
#X connect 37 2 7 0;
#X connect 40 0 46 0;
#X connect 41 0 40 0;
#X connect 42 0 40 0;
#X connect 43 0 40 0;
#X connect 44 0 43 0;
#X connect 44 1 42 0;
#X connect 45 0 44 0;
#X connect 46 0 47 0;
#X connect 47 0 52 0;
#X connect 47 1 48 0;
#X connect 47 2 48 1;
#X connect 48 0 49 0;
#X connect 49 0 2 0;
#X connect 51 0 50 0;
#X connect 51 0 54 1;
#X connect 53 0 33 0;
#X connect 54 0 22 0;
#X connect 55 0 37 0;
#X connect 56 0 18 0;
#X connect 57 0 10 0;
#X connect 57 0 11 0;
#X connect 59 0 60 0;
#X connect 60 0 29 0;
#X connect 61 0 53 0;
#X connect 62 0 63 0;
#X connect 64 0 65 0;
#X connect 65 0 1 0;
#X restore 46 400 pd play-chroma;
#X obj 211 380 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X obj 46 381 bng 15 250 50 0 empty empty empty 17 7 0 10 #fcfcfc #000000 #000000;
#X msg 519 89 clear;
#X obj 519 113 text define chroma;
#X obj 46 360 r \$1-\$2-play-chroma;
#X obj 211 358 r \$1-\$2-play-chromagram;
#X connect 0 0 12 3;
#X connect 1 0 12 3;
#X connect 2 0 1 0;
#X connect 3 0 12 1;
#X connect 4 0 12 2;
#X connect 5 0 3 0;
#X connect 5 1 4 0;
#X connect 6 0 5 2;
#X connect 7 0 12 3;
#X connect 10 0 15 0;
#X connect 12 0 10 0;
#X connect 12 0 11 0;
#X connect 13 0 12 0;
#X connect 15 0 14 0;
#X connect 16 0 15 1;
#X connect 17 0 11 1;
#X connect 19 0 18 0;
#X connect 20 0 5 0;
#X connect 21 0 5 1;
#X connect 22 0 0 0;
#X connect 22 0 2 0;
#X connect 24 0 17 0;
#X connect 24 0 25 0;
#X connect 28 0 26 0;
#X connect 29 0 27 0;
#X connect 30 0 31 0;
#X connect 32 0 29 0;
#X connect 33 0 28 0;
#X restore 290 94 pd chroma;
#X obj 290 113 cnv 5 95 5 empty empty empty 5 6 0 10 #00faff #dcdcdc 0;
#X obj 546 193 vsl_pre \$1 \$2 sil.thrs;
#X obj 482 349 nbx_pre \$1 \$2 t4sil;
#X obj 515 192 ./customGUI/tgl-but_pre \$1 \$2 DSP;
#X connect 9 1 10 0;
#X connect 12 0 13 0;
#X connect 26 0 35 0;
#X connect 36 0 11 2;
#X connect 37 0 11 1;
#X connect 39 0 17 0;
#X connect 39 0 11 0;
#X connect 39 0 23 0;
#X connect 39 0 24 0;
#X connect 39 0 41 0;
#X connect 43 0 26 0;
#X connect 44 0 34 0;
#X connect 45 0 9 0;
#X connect 45 0 12 0;
#X coords 0 -1 1 1 234 200 1 400 180;
